<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Asynchronous file and standard stream adaptation."><meta name="keywords" content="rust, rustlang, rust-lang, fs"><title>tokio::fs - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-93196c7a1c3542a8.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../tokio/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../tokio/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module fs</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">tokio</a>::<wbr><a class="mod" href="#">fs</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/tokio/fs/mod.rs.html#1-145">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Asynchronous file and standard stream adaptation.</p>
<p>This module contains utility methods and adapter types for input/output to
files or standard streams (<code>Stdin</code>, <code>Stdout</code>, <code>Stderr</code>), and
filesystem manipulation, for use within (and only within) a Tokio runtime.</p>
<p>Tasks run by <em>worker</em> threads should not block, as this could delay
servicing reactor events. Portable filesystem operations are blocking,
however. This module offers adapters which use a <code>blocking</code> annotation
to inform the runtime that a blocking operation is required. When
necessary, this allows the runtime to convert the current thread from a
<em>worker</em> to a <em>backup</em> thread, where blocking is acceptable.</p>
<h3 id="usage"><a href="#usage">Usage</a></h3>
<p>Where possible, users should prefer the provided asynchronous-specific
traits such as <a href="../io/trait.AsyncRead.html"><code>AsyncRead</code></a>, or methods returning a <code>Future</code> or <code>Poll</code>
type. Adaptions also extend to traits like <code>std::io::Read</code> where methods
return <code>std::io::Result</code>. Be warned that these adapted methods may return
<code>std::io::ErrorKind::WouldBlock</code> if a <em>worker</em> thread can not be converted
to a <em>backup</em> thread immediately.</p>
<p><strong>Warning</strong>: These adapters may create a large number of temporary tasks,
especially when reading large files. When performing a lot of operations
in one batch, it may be significantly faster to use <a href="../task/fn.spawn_blocking.html"><code>spawn_blocking</code></a>
directly:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>tokio::fs::File;
<span class="kw">use </span>std::io::{BufReader, BufRead};
<span class="kw">async fn </span>count_lines(file: File) -&gt; <span class="prelude-ty">Result</span>&lt;usize, std::io::Error&gt; {
    <span class="kw">let </span>file = file.into_std().<span class="kw">await</span>;
    tokio::task::spawn_blocking(<span class="kw">move </span>|| {
        <span class="kw">let </span>line_count = BufReader::new(file).lines().count();
        <span class="prelude-val">Ok</span>(line_count)
    }).<span class="kw">await</span><span class="question-mark">?
</span>}</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DirBuilder.html" title="tokio::fs::DirBuilder struct">DirBuilder</a></div><div class="item-right docblock-short">A builder for creating directories in various manners.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DirEntry.html" title="tokio::fs::DirEntry struct">DirEntry</a></div><div class="item-right docblock-short">Entries returned by the <a href="struct.ReadDir.html"><code>ReadDir</code></a> stream.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.File.html" title="tokio::fs::File struct">File</a></div><div class="item-right docblock-short">A reference to an open file on the filesystem.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.OpenOptions.html" title="tokio::fs::OpenOptions struct">OpenOptions</a></div><div class="item-right docblock-short">Options and flags which can be used to configure how a file is opened.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ReadDir.html" title="tokio::fs::ReadDir struct">ReadDir</a></div><div class="item-right docblock-short">Reads the entries in a directory.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.canonicalize.html" title="tokio::fs::canonicalize fn">canonicalize</a></div><div class="item-right docblock-short">Returns the canonical, absolute form of a path with all intermediate
components normalized and symbolic links resolved.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.copy.html" title="tokio::fs::copy fn">copy</a></div><div class="item-right docblock-short">Copies the contents of one file to another. This function will also copy the permission bits
of the original file to the destination file.
This function will overwrite the contents of to.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.create_dir.html" title="tokio::fs::create_dir fn">create_dir</a></div><div class="item-right docblock-short">Creates a new, empty directory at the provided path.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.create_dir_all.html" title="tokio::fs::create_dir_all fn">create_dir_all</a></div><div class="item-right docblock-short">Recursively creates a directory and all of its parent components if they
are missing.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.hard_link.html" title="tokio::fs::hard_link fn">hard_link</a></div><div class="item-right docblock-short">Creates a new hard link on the filesystem.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.metadata.html" title="tokio::fs::metadata fn">metadata</a></div><div class="item-right docblock-short">Given a path, queries the file system to get information about a file,
directory, etc.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read.html" title="tokio::fs::read fn">read</a></div><div class="item-right docblock-short">Reads the entire contents of a file into a bytes vector.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_dir.html" title="tokio::fs::read_dir fn">read_dir</a></div><div class="item-right docblock-short">Returns a stream over the entries within a directory.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_link.html" title="tokio::fs::read_link fn">read_link</a></div><div class="item-right docblock-short">Reads a symbolic link, returning the file that the link points to.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_to_string.html" title="tokio::fs::read_to_string fn">read_to_string</a></div><div class="item-right docblock-short">Creates a future which will open a file for reading and read the entire
contents into a string and return said string.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.remove_dir.html" title="tokio::fs::remove_dir fn">remove_dir</a></div><div class="item-right docblock-short">Removes an existing, empty directory.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.remove_dir_all.html" title="tokio::fs::remove_dir_all fn">remove_dir_all</a></div><div class="item-right docblock-short">Removes a directory at this path, after removing all its contents. Use carefully!</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.remove_file.html" title="tokio::fs::remove_file fn">remove_file</a></div><div class="item-right docblock-short">Removes a file from the filesystem.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.rename.html" title="tokio::fs::rename fn">rename</a></div><div class="item-right docblock-short">Renames a file or directory to a new name, replacing the original file if
<code>to</code> already exists.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_permissions.html" title="tokio::fs::set_permissions fn">set_permissions</a></div><div class="item-right docblock-short">Changes the permissions found on a file or a directory.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.symlink.html" title="tokio::fs::symlink fn">symlink</a></div><div class="item-right docblock-short">Creates a new symbolic link on the filesystem.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.symlink_metadata.html" title="tokio::fs::symlink_metadata fn">symlink_metadata</a></div><div class="item-right docblock-short">Queries the file system metadata for a path.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.try_exists.html" title="tokio::fs::try_exists fn">try_exists</a></div><div class="item-right docblock-short">Returns <code>Ok(true)</code> if the path points at an existing entity.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.write.html" title="tokio::fs::write fn">write</a></div><div class="item-right docblock-short">Creates a future that will open a file for writing and write the entire
contents of <code>contents</code> to it.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="tokio" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.2 (9eb3afe9e 2023-03-27)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-08ddfdda51b8ee2e.css" ></div></body></html>